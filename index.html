<html>
	<head>
		<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
		<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
		<script src="https://code.angularjs.org/1.4.5/angular.min.js"></script>
		<link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
		<script>
			angular.module("myapp", [])

			.directive("datepicker", function() {
			  return {
				restrict: "A",
				 scope: {
					 date: "=date",
					 dateString: "@initDate"
				},
				template: "<input type='text' class='datepicker' ng-model='dateString' ng-class='{\"invalid\": !valid}'>",
				link: function(scope, element, attrs) {
					element.children(".datepicker").datepicker({
						changeMonth: true,
						changeYear: true,
						dateFormat: "dd.mm.yy",
					    onSelect: function(dateString) {
							scope.dateString = dateString;
							scope.$apply();
						}
					});
				},
				controller: function($scope) {
					$scope.valid;
					$scope.$watch("dateString", function() {
						try {
							var date = $.datepicker.parseDate("dd.mm.yy", $scope.dateString);
							$scope.date = $.datepicker.formatDate('yy-mm-dd', date)+"T00:00:00.000Z"
						} catch(e) {
							console.log("invalid");
						}
					});
				}
			  };
			})
			.controller("myctrl", ["$scope", function($scope) {
				$scope.date1 = "";
				$scope.date2 = "";
			}]);
		</script>
		<style>
			.invalid { border: 1px solid red;}
		</style>
	</head>
	<body>
	<div ng-app="myapp">
		<div ng-controller="myctrl">
			{{date1}}<div datepicker date="date1" init-date="01.01.2019"></div>
			{{date2}}<div datepicker date="date2" init-date="01.01.2031"></div>
		</div>
	</div>
	</body>
</html>